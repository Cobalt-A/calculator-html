!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#car_price"),t=document.querySelector("#range_car_price"),r=document.querySelector("#first_pay"),n=document.querySelector("#range_first_pay"),u=document.querySelector(".range__label-percent"),a=document.querySelector("#time"),l=document.querySelector("#range_time"),i=document.querySelector(".calculator-form__summ-full"),o=document.querySelector(".calculator-form__summ-months");function m(){var t=Number(e.parentElement.querySelector(".range__input").max),n=Number(e.parentElement.querySelector(".range__input").min),u=Number(r.parentElement.querySelector(".range__input").min),l=Number(r.parentElement.querySelector(".range__input").max),m=Number(a.parentElement.querySelector(".range__input").min),c=Number(a.parentElement.querySelector(".range__input").max),s=d(e.value),_=d(r.value),v=d(a.value);if(!(s>t||s<n||_>l||_<u||v>c||v<m)){var p=Math.round((s-_)*(.05*Math.pow(1.05,v))/(Math.pow(1.05,v)-1)),b=Math.round(_+v*Number(p));o.innerHTML=g(p),i.innerHTML=g(b)}}function c(e,t){var r=e.parentElement.querySelector(".range__number"),n=e.parentElement.querySelector(".range__input"),u=g(t);r.value=u,n.value=t,s(n),m()}function g(e){return new Intl.NumberFormat("ru-RU").format(e)}function d(e){return Math.round(Number(e.replace(/&nbsp(?:;?)/gi,"Â ").replace(/\s/g,"").trim()))}function s(e){var t=e.min,r=e.max,n=e.value;e.style.backgroundSize=100*(n-t)/(r-t)+"% 100%"}function _(e,t){return Math.round(100*t/e)}t.addEventListener("input",(function(t){var a=d(t.target.value),l=Number(Math.round(a*Number(u.innerHTML)/100)),i=Number(t.target.parentElement.querySelector(".range__input").min);a>Number(t.target.parentElement.querySelector(".range__input").max)||a<i||(e.value=g(a),n.setAttribute("min",10*a/100),n.setAttribute("max",60*a/100),n.value=Math.round(a*Number(u.innerHTML)/100),r.value=g(l),u.innerHTML=_(a,l))})),e.addEventListener("input",(function(e){var a=d(e.target.value.replace(/[^0-9\-()\s]/g,"")),l=Number(Math.round(a*Number(u.innerHTML)/100)),i=Number(e.target.parentElement.querySelector(".range__input").min),o=Number(e.target.parentElement.querySelector(".range__input").max);e.target.value.match(/[^0-9\-()\s]/g)&&(e.target.value=g(a)),a>o||a<i||(t.value=a,n.setAttribute("min",10*a/100),n.setAttribute("max",60*a/100),n.value=Math.round(a*Number(u.innerHTML)/100),r.value=g(l),u.innerHTML=_(a,l))})),n.addEventListener("input",(function(t){var n=d(t.target.value),a=d(e.value),l=Number(t.target.parentElement.querySelector(".range__input").min);n>Number(t.target.parentElement.querySelector(".range__input").max)||n<l||(r.value=g(n),u.innerHTML=_(Number(a),n))})),r.addEventListener("input",(function(t){var r=d(t.target.value.replace(/[^0-9\-()\s]/g,"")),a=d(e.value),l=Number(t.target.parentElement.querySelector(".range__input").min),i=Number(t.target.parentElement.querySelector(".range__input").max);t.target.value.match(/[^0-9\-()\s]/g)&&(t.target.value=g(r)),r>i||r<l||(n.value=r,u.innerHTML=_(a,r))})),l.addEventListener("input",(function(e){a.value=e.target.value})),a.addEventListener("input",(function(e){var t=Number(e.target.parentElement.querySelector(".range__input").min),r=Number(e.target.parentElement.querySelector(".range__input").max),n=d(e.target.value);console.log(n>r,n<t),n>r||n<t||(l.value=e.target.value)})),a.addEventListener("focusout",(function(e){var t=Number(e.target.parentElement.querySelector(".range__input").min),r=Number(e.target.parentElement.querySelector(".range__input").max),n=d(e.target.value);n<t&&(n=t),n>r&&(n=r),c(e.target,n)})),r.addEventListener("focusout",(function(t){var n=Number(t.target.parentElement.querySelector(".range__input").min),a=Number(t.target.parentElement.querySelector(".range__input").max),l=d(t.target.value);console.log(l),l<n&&(l=n),l>a&&(l=a),c(t.target,l),u.innerHTML=_(d(e.value),d(r.value))})),e.addEventListener("focusout",(function(t){var a=Number(t.target.parentElement.querySelector(".range__input").min),l=Number(t.target.parentElement.querySelector(".range__input").max),i=d(t.target.value);console.log(i),i<a&&(i=a),i>l&&(i=l),n.setAttribute("min",10*i/100),n.setAttribute("max",60*i/100),c(t.target,i),c(r,Math.round(i*Number(u.innerHTML)/100)),u.innerHTML=_(d(e.value),d(r.value))})),document.querySelector(".calculator-form").addEventListener("input",(function(e){m()})),document.querySelector(".calculator-form__button").addEventListener("click",(function(m){var c=m.target.closest(".calculator-form__button"),g=c.querySelector(".calculator-form__button-text"),s=c.querySelector(".calculator-form__loader");g.classList.add("hide"),s.classList.remove("hide"),setTimeout((function(){var m={carPrice:d(e.value),firstPay:d(r.value),percent:u.value,time:a.value,monthsSum:d(o.innerHTML),fullSum:d(i.innerHTML)},_=JSON.stringify(m);g.classList.remove("hide"),s.classList.add("hide"),c.setAttribute("disabled",""),e.setAttribute("disabled",""),r.setAttribute("disabled",""),a.setAttribute("disabled",""),t.setAttribute("disabled",""),n.setAttribute("disabled",""),l.setAttribute("disabled",""),alert(_)}),1e3)})),document.querySelectorAll(".range__input").forEach((function(e){s(e),e.addEventListener("input",(function(e){s(e.target)}))}))}))}();